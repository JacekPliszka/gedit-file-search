TODO
=====
- display somehow that search is still running
  - maybe animated icon for result tab?
  - or cylon-style progress bar?
- cleanup search dialog layout (convert to correct GTK layout)
- check encoding of grep output (ie. make sure the lines in result panel are in correct encoding)
- run tests:
  - search through / (or /usr or /usr/share) to find weird corner cases
  - I think there's a bug somewhere when searching through /usr/share on my system (xargs displays warnings)
  - there are also some cases where a result line displays more than one text line...
  - check that files in /testfiles cause no errors/warnings/wrong behavior:
  - testfiles/utf8-extract-1.bin (triggers a Pango warning): is probably this Python bug: http://bugs.python.org/issue3672
- implement Edit button in result panel
- fix counting of found matches (it currently counts found _lines_, but a line can contain multiple matches...)
- highlight found text in result panel (like, with yellow background for the actually matching text)
- for every result panel, somehow display search parameters (search text, directory)
  - maybe as tooltip for result tab?
  - or as first line in result list?
- maybe use single-click on result line to open file (instead of double click?)
- implement all the options in search dialog
- make it possible to submit search dialog with Enter key
- maybe improve search directory chooser in search dialog?
  - use some existing widget to choose directory?
- remember options (last search terms, last search directories, search options)
  - remember all this also over Gedit restart
- when opening search dialog, deduce initially-display search dir in a better way
  - it should do "the right thing" yet the user must be able to understand the decision-making way
- check that activating/deactivating plugin works correctly and leaves no cruft behind
- check focus behavior of result list
- add keyboard shortcut for opening search dialog
- fix list of recent directories: suppress duplicate entries like "/tmp" and "/tmp/"
- publish initial version
- maybe limit line length in result list?
- add option to ignore backup files (files ending with ~ etc):
  - *.~
  - .#* (emacs backup files? or from CVS?)
- create test plan for testing the full functionality and all corner cases with a new release
- Gedit 2.16 quirks:
  - result list sometimes displays no more text (maybe caused by too long lines?)
- test searching through directories with many files, many directories, or big files or files with very long lines
- search dialog: maybe get list of files suffixes (*.C, *.py...) from Gedits internal syntax highlighting database?
- there might be a bug (race) in cancelling: if a new grep is started after I got the child PIDs of sh and before I kill find, that new grep process is probably never killed (?!)
- maybe do some damage control for bugs where grep is left alive: redirect grep stderr to /dev/null?
- the expand_all() calls in _addResultFile/Line are bad for performance (esp. for > 10000 results) and should be optimized
- check that searching through binary files doesn't break the search output etc.
- cancelling should happen immediately (currently there might be a delay of some 100 msec - maybe text left in GrepParser etc.)
- maybe implement some further (but probably not significant) performance improvements:
  - call updateSummary() less often (like after the loop in parseFragment())
  - similarly, lock (freeze) TreeStore when adding several rows at once
  - the GrepParser could probably be sped up a bit
